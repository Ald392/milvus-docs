---
id: application-scenario
title: Application scenarios
sidebar_label: Application scenarios
---

# 应用场景
## 典型场景

在目前大部分的AI应用场景下，都可以使用Milvus来搭建智能应用系统：

- 图片识别

  以图搜图，通过图片检索图片。具体应用例如：人脸检索，人体检索，和车辆检索，以及商品图片检索，人脸支付等

- 视频处理

  针对视频信息的实时人脸检索和轨迹跟踪

- 自然语言处理

  基于语义的文本检索和推荐，通过文本检索近似文本。

- 声纹匹配，音频检索。

- 文件去重，通过文件指纹去除重复文件。


## 应用架构
Milvus做特征向量检索时典型应用架构如下：

![MilvusTypicalUsage](assets/MilvusTypicalUsage.png)

非结构化数据(图像/视频/文字/音频等）首先通过特征提取模型产生特征向量，然后存入Milvus数据库系统。查询的时候，待查询的非结构化数据，也需要通过特征提取模型，提取特征向量。然后用该向量到Milvus中已存入的向量集里，查询匹配度最高的向量集合。最后，使用返回的向量ID，找到对应非结构化数据，结合上层应用，实现对应功能。

### 典型架构
Milvus做特征向量检索时典型应用架构如下：

![MilvusTypicalApplication](assets/MilvusTypicalApplication_cn.png)

非结构化数据(图像/视频/文字/音频等）首先通过特征提取模型产生特征向量，然后存入Milvus数据库系统。查询的时候，待查询的非结构化数据，也需要通过特征提取模型，提取特征向量。然后用该向量到Milvus中已存入的向量集里，查询匹配度最高的向量集合。最后，使用返回的向量ID，找到对应非结构化数据，结合上层应用，实现对应功能。

## 案例 - 基于Milvus的人脸搜索

### 用户需求

- VIP客户通知

- VIP client notification

VIP人群库中保存的是VIP客户的人脸特征，摄像头提取的人脸都要与VIP人群库中的人脸进行对比。一旦通过对于发现了VIP客户，系统需要给出通知。

- 一人一档

摄像头提取的人脸都会与证照库中的人脸特征进行对比，通过人脸找到关联的证件ID，进而找到个人的所有信息。

- 潜在新客户

对于无法在人员库中找到的人脸，则会将其自动保存入库，作为潜在新客户进行安排服务。

- 客户关系管理

按照人脸被搜索的频率，将人脸照片分类。搜索频率较低的人脸可能成为需重点加强管理的目标客户。


#### 系统实现架构图

![FaceSearch](assets/FaceSearch_cn.png)

- **人脸获取设备**：摄像头拍到人脸图片后，把图片发到特征向量提取设备。

- **特征提取服务**：收到摄像头发过来的人脸图片后，利用深度学习系统训练的模型，转换为512维人脸特征向量。

- **应用层**：

  - 黑名单告警：收到人脸的特征向量后，会发往特征向量库比对，如果发现匹配度较高，则发出告警。
  - 以人脸查人员信息：可以通过人脸在人员信息库中，检索人员ID，找到后再去MySQL中把对应人员的所有信息展示出来。
  - 人员轨迹再现：用户可以使用人脸查找人员信息，然后把与他相关的历史轨迹展示出来。

- **数据层**：

  - 敏感人群库

    向量库，百万级，数据基本无更新。对于查询精度要求高，查询速度要求快，查询的QPS要求达到1000每秒，允许批量查询。

  - 人员库

    向量库，保存10亿条人脸特征数据，数据会有少量更新。每个摄像头拍到的人脸都需要与人员库中的人脸进行查询对比，查询率要求达到1000 QPS，允许批量查询。

  - 历史库

    向量库，每天产生2亿人脸数据，需要保存3个月（90天）的人脸向量数据即180亿向量数据。人脸检索时，到历史库中通过人脸特征检索人脸轨迹，允许批量查询。

  - 人员信息库

    结构化数据库，以MySQL存储，存储以个人ID号为主键的个人信息。

- **基础设施**：Milvus实现向量数据的存储，MySQL实现结构化数据存储，Minio实现非结构化数据(人脸图片)存储。
